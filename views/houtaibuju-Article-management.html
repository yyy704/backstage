<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>layout 后台大布局 - Layui</title>
    <link rel="stylesheet" href="/layui/css/layui.css">
    <link rel="stylesheet" href="../nprogress-jc/nprogress.css">
</head>

<body class="layui-layout-body">
    <div class="layui-layout layui-layout-admin">
        <!-- 引入头部 -->
        {{ include '../layered/tou.html'}}

        <!-- 引入左侧 -->
        {{ include '../layered/zuolan..html'}}

        <div class="layui-body">
            <!-- 内容主体区域 -->
            <div style="padding: 15px;">
                <h2>文章管理</h2>
                <table id="demo" lay-filter="test"></table>

            </div>
        </div>

        <script type="text/html" id="barDemo">
            <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
            <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
        </script>

        <!-- 引入底部 -->
        {{ include '../layered/dibu.html'}}
    </div>
    <script src="/layui/layui.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.js"></script>
    <script src="../time工具/timegonju.js"></script>
    <script src="../nprogress-jc/nprogress.js"></script>
    <script src="../progress/progress.js"></script>
    <script>
        //JavaScript代码区域
        layui.use(['element', 'table'], function() {
            var element = layui.element;
            var table = layui.table;

            //第一个实例
            table.render({
                elem: '#demo',
                height: 473,
                url: '/getarticle' //数据接口
                    ,
                toolbar: '#toolbarDemo' //开启头部工具栏，并为其绑定左侧模板
                    ,
                defaultToolbar: ['filter', 'print', 'exports', {
                    title: '提示' //标题
                        ,
                    layEvent: 'LAYTABLE_TIPS' //事件名，用于 toolbar 事件中使用
                        ,
                    icon: 'layui-icon-tips' //图标类名
                }],
                page: true //开启分页
                    ,
                cols: [
                    [ //表头
                        {
                            field: 'id',
                            title: 'ID',
                            width: 80,
                            sort: true,
                            fixed: 'left'
                        }, {
                            field: 'title',
                            title: '标题',
                            width: 80
                        }, {
                            field: 'content',
                            title: '内容',
                            width: 80,
                            sort: true
                        }, {
                            field: 'author',
                            title: '作者',
                            width: 80
                        }, {
                            field: 'describe',
                            title: '描述',
                            width: 177
                        }, {
                            field: 'Launchtime',
                            title: '发送时间',
                            width: 180,
                            sort: true,
                            templet: (aiaia) => {
                                let shijian = aiaia.Launchtime;
                                shijian = moment(shijian).format('YYYY-MM-DD HH:mm:ss');
                                return shijian;
                            }
                        }, {
                            field: 'state',
                            title: '状态',
                            width: 80,
                            sort: true,
                            templet: (aiaia) => {
                                let zhi = aiaia.state;
                                let zhuangtai = {
                                    0: '已下架',
                                    1: '已上架',
                                    2: '待审核'
                                };
                                let chuli = zhuangtai[zhi];
                                return chuli;
                            }
                        }, {
                            fixed: 'right',
                            title: '操作',
                            toolbar: '#barDemo',
                            width: 150
                        }
                    ]
                ]

            });


        })
    </script>
</body>

</html>